---
title: Express 실습해보기 - Express 환경 세팅하기
description: Node.js와 Express 프레임워크를 사용하여 서버를 만들고 정적 파일을 제공하는 방법을 단계별로 알아봅니다
date: 2022-11-12
tags: ['JavaScript']
featured: false
thumbnail: '/thumbnails/express-setup-guide.png'
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Steps, Step } from 'fumadocs-ui/components/steps';

## 📚 데이터가 변경되면 변경된 내용을 다시 렌더링하자

수업시간에 Mock data를 만들어 데이터가 변경되면 setState 함수를 실행시켜 데이터의 변경사항을 렌더링했었다.
이 내용들을 공부하면서 state와 setState의 개념에 대해서 확실하게 알고갈 수 있었다.

<Callout type='warn'>
**실제 개발 환경에서는?**

이전 코드의 문제점이 있다. 회사에선 아무도 이런 코드로 프로그래밍을 하지 않는다는 것이다. 회사엔 데이터를 다루는 백엔드 개발자가 있을 것이고, 프론트엔드는 서버에 데이터를 요청하고 응답받은 데이터를 사용해서 사용자가 보는 화면에 렌더링을 할 것이다.

</Callout>

---

## Express로 서버를 만들어보자

서버에 데이터를 요청하고 응답받는 연습을 해보자. 연습을 하기 위해 Express 프레임워크를 사용해보자🙌🏻

### 🔥 express의 역할 [express는 뭐하는 친구야?]

![Express Framework](https://velog.velcdn.com/images/riceintheramen/post/d222cd4a-70f4-4495-b620-300d81dad825/786d30e016fad2cb7dc2c76af86d55f6afd277dd5a8a80dd17b13332bfe0131f.png)

<Callout type='info' title='Express란?'>
Node.js를 위한 빠르고 쉬운 웹 프레임워크이다. 익히 들어본 자바의 spring처럼 Express는 JS의 웹 프레임워크이다. Express를 사용해 서버를 만들고 Node.js 개발 시 개발을 빠르고 손쉽게 할 수 있도록 도와주는 역할을 한다.

</Callout>

---

## 🔥 Express 설치하기

<Steps>

<Step>
### 프로젝트 폴더 생성

먼저, 프로젝트를 진행할 프로젝트 폴더를 만든다.

</Step>

<Step>
### npm 초기화

`npm init -y`로 초기화를 진행한다.

```json title="package.json"
{
  "name": "playground",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

초기화를 하면 package.json 파일이 생성된 것을 확인할 수 있다.

</Step>

<Step>
### Express 설치

`npm i express` CLI 명령어를 사용해 express를 설치한다.

```json title="package.json (Express 설치 후)"
{
  "name": "playground",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2"
  }
}
```

dependencies에 추가되었다! 아주 간단하게 express 설치를 완료했다. 😎

</Step>

</Steps>

---

## 🔥 Express 사용해서 서버 실행하기

<Steps>

<Step>
### Express import 하기

`require`를 사용해서 외부 모듈을 가져오자.

```jsx title="app.js"
const express = require('express');
```

<Callout type='info'>
babel을 사용하면 흔히 아는 import 키워드를 사용해서 가져올 수도 있지만 지금은 babel을 따로 설치하지 않았기 때문에 require를 사용하자

</Callout>

</Step>

<Step>
### Express 실행

```jsx title="app.js"
const express = require('express');
const app = express();
```

</Step>

<Step>
### 서버 시작하기

`app.listen()` 메서드를 사용하자

<Callout type='info' title='app.listen()'>
`app.listen()` 메서드는 웹 서버를 시작하는 시작점의 역할을 한다.

app.listen은 두 개의 인자를 받는데:

- 첫 번째 인자: PORT 번호
- 두 번째 인자: listen 메서드로 서버를 계속 열어두면 무한 루프로 실행될 콜백함수

</Callout>

```jsx title="app.js"
const PORT = 9999;

app.listen(PORT, () => {
  console.log(`Server Listening on http://localhost:${PORT}`);
});
```

이제 `node app.js`로 실행시켜보면 서버가 열린 것을 확인할 수 있다!

브라우저에서 `http://localhost:9999`에 접속하면 **Cannot GET /** 이 뜨는것을 확인할 수 있다.

<Callout type='success'>
이러면 express 서버를 실행시키는 것까지 성공적으로 완료했다!

</Callout>

</Step>

</Steps>

---

## 🔥 받은 요청 처리하기 [라우팅]

프론트엔드 관점에서 생각을 하는 것보다 내가 서버의 입장이 되었을 때, express를 이해하기 쉽다. 나는 서버야!라는 생각을 가지고 코드를 보면,

```jsx title="app.js"
app.get('/', (req, res) => {
  res.send('<h1>Hello World</h1>');
});
```

'/' path로 get 요청이 오면 👉🏻 `<h1>Hello World</h1>`을 보내주자와 동일하다.

<Callout type='info' title='라우팅이란?'>
클라이언트 요청에 응답하는 방법을 결정하는 것을 **라우팅**이라 한다.

각 라우트는 하나 이상의 핸들러 함수를 가질 수 있으며, 이러한 함수는 라우트가 일치할 때 실행된다.

</Callout>

라우트 정의에는 다음과 같은 구조가 필요하다:

![Route Definition](https://poiemaweb.com/img/define-route.png)

---

## Nodemon 설치하기

지금은 코드 하나를 작성하고 변경된 내용을 확인하려면 서버를 껐다가 다시 켜야하는 불편함이 있다. 개발자는 불편함을 참으면 안된다고 배웠으며, 우리의 선배님들은 이 불편함을 해결하기 위해 무언가를 만들어 내셨을 것이다. 그것이 바로 **nodemon**이다.

<Callout type='info' title='Nodemon'>
nodemon은 변경된 내용들을 계속 watch하면서 자동적으로 서버를 껐다가 켜주는 역할을 한다.

[nodemon - npm](https://www.npmjs.com/package/nodemon)

</Callout>

### 🖥 dependencies와 devDependencies의 차이점

설치를 하기 전에 생각을 해봐야 할 것이 있다. 이 nodemon은 어디에 설치를 해야할까?

다시 말해서, nodemon은 사용자가 필요한 패키지인가?

<Callout type='warn'>
**개발 의존성 (devDependencies)**

nodemon은 개발자가 사용하기 위해서 설치하는 것이기 때문에 배포할 때에는 필요없는 기능이다.

그렇기 때문에 `--save-dev` 라는 옵션을 추가해서 install 해야한다.

</Callout>

```bash
npm i -D nodemon
```

`-D`와 `--save-dev`는 동일하다.

nodemon을 설치했다면 package.json에서 script를 수정해보자.

```json title="package.json"
{
  "name": "playground",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "nodemon server.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2"
  },
  "devDependencies": {
    "nodemon": "^2.0.20"
  }
}
```

nodemon으로 server.js를 실행시키겠다는 단축키를 만들었다.

이제 터미널에 `node server.js`가 아닌 `npm run start`를 사용해서 서버를 실행시킬 수 있다.

---

## ✏️ 정적 파일(HTML) 제공

HTML, CSS, Javascript, 이미지 파일과 같은 정적 파일을 제공하기 위해 `express.static`을 사용한다.

```jsx title="server.js"
const express = require('express');

const app = express();
const PORT = 9999;

app.use(express.static('public'));

app.get('/', (req, res) => {
  res.send('<h1>Hello World</h1>');
});

app.listen(PORT, () => {
  console.log(`Server Listening on http://localhost:${PORT}`);
});
```

public directory에 있는 파일을 사용할 수 있다.

우린 지금 public 폴더가 없으니, public 폴더를 만들고 index.html을 만들어보자

```html title="public/index.html"
<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css" />
    <script defer src="js/app.js"></script>
  </head>
  <body>
    <div id="root">
      <h1>Hello World! 😎</h1>
    </div>
  </body>
</html>
```

<Callout type='success'>
이제 서버는 애플리케이션이 실행되면 index.html을 제공한다!

</Callout>

---

## 참고 자료

- [Express 기본 - PoiemaWeb](https://poiemaweb.com/express-basics)
