---
title: 'í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± ì—°ìŠµí•˜ê¸° ğŸ» (fireEvent)'
date: 2023-06-07
tags: ['Develop']
thumbnail: /thumbnails/default.jpg
---

import { Callout } from 'fumadocs-ui/components/callout';

ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ë˜ê¸° ì „ì—ëŠ” ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ ìˆê³ , ì²´í¬ë°•ìŠ¤ì— ì²´í¬ê°€ ë˜ë©´ ë²„íŠ¼ì„ ë¹„í™œì„±í™”ì‹œí‚¤ë ¤ê³  í•©ë‹ˆë‹¤.
í…ŒìŠ¤íŠ¸ì—ì„œ ì²´í¬ë°•ìŠ¤ê°€ ì²´í¬ë˜ê²Œë” ì—…ë°ì´íŠ¸í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?
ë²„íŠ¼ì—ì„œì™€ ë™ì¼í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. `fireEvent.click`ì„ ì‚¬ìš©í•´ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ëŠ” ê±°ì£ .
ê·¸ë¦¬ê³  í…ŒìŠ¤íŠ¸ ë‚´ì—ì„œëŠ” ì´ ê³¼ì •ì„ ë‘ ë²ˆ ê±°ì¹  í…ë°ìš”,

1. ì²´í¬ë°•ìŠ¤ì— ì²´í¬ë¥¼ í•˜ê³  ë²„íŠ¼ ë¹„í™œì„±í™” ì—¬ë¶€ë¥¼ í™•ì¸í•œ ë’¤,
2. í´ë¦­ ì´í›„ ì²´í¬ë°•ìŠ¤ì˜ ì²´í¬ê°€ í•´ì œë˜ë©´ ë²„íŠ¼ì´ ë‹¤ì‹œ í™œì„±í™”ë˜ëŠ”ì§€ì˜ ì—¬ë¶€ë¥¼ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤.

### ğŸ¥Â í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

```text
test('ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë²„íŠ¼ì´ ë¹„í™œì„±í™” ë˜ì–´ì•¼ í•˜ê³ , ë‹¤ì‹œ í´ë¦­í•˜ë©´ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ì•¼ í•œë‹¤.', () => {
  render(<App />);
  const colorButton = screen.getByRole('button');
  const checkbox = screen.getByRole('checkbox');
  fireEvent.click(checkbox);
  expect(colorButton).toBeDisabled();
  fireEvent.click(checkbox);
  expect(colorButton).toBeEnabled();
});
```

ë‘ í´ë¦­ ì´ë²¤íŠ¸ ì‚¬ì´ì— ì²´í¬ë°•ìŠ¤ë¥¼ ì¬ì •ì˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. í•œ ë²ˆ ì •ì˜í•˜ë©´ DOMì—ì„œ ìš”ì†Œê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ” í•œ ê·¸ëŒ€ë¡œ ìˆê¸° ë•Œë¬¸ì´ì£ .

```text
import './App.css';
import { useState } from 'react';

function App() {
  const [buttonColor, setButtonColor] = useState('red');
  const [disabled, setDisabled] = useState(false);
  const newButtonColor = buttonColor === 'red' ? 'blue' : 'red';

  return (
    <div>
      <button
        style={{ backgroundColor: buttonColor }}
        onClick={() => setButtonColor(newButtonColor)}
        disabled={disabled}
      >
        Change to {newButtonColor}
      </button>
      <input
        type="checkbox"
        onChange={(e) => setDisabled(e.target.checked)}
        defaultChecked={disabled}
      />
    </div>
  );
}

export default App;
```

### ğŸš§Â Code Refactoring

í˜„ì¬ í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œëŠ” `const checkbox = screen.getByRole('checkbox');` ë¡œ checkboxë¥¼ í™•ì¸í•˜ëŠ”ë°ìš”, ì²´í¬ë°•ìŠ¤ê°€ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ **getByRoleì˜ name ì˜µì…˜**ì…ë‹ˆë‹¤.

```text
test('ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë²„íŠ¼ì´ ë¹„í™œì„±í™” ë˜ì–´ì•¼ í•˜ê³ , ë‹¤ì‹œ í´ë¦­í•˜ë©´ ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ì•¼ í•œë‹¤.', () => {
  render(<App />);
  const colorButton = screen.getByRole('button', { name: 'Disable button' });
  const checkbox = screen.getByRole('checkbox');
  fireEvent.click(checkbox);
  expect(colorButton).toBeDisabled();
  fireEvent.click(checkbox);
  expect(colorButton).toBeEnabled();
});
```

í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

<Callout>
  TestingLibraryElementError: Unable to find an accessible element with the role
  â€œcheckboxâ€ and name â€œDisable buttonâ€
</Callout>

ì²´í¬ë°•ìŠ¤ì´ë©´ì„œ nameì´ Disable buttonì´ë¼ëŠ” ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ë‹¤ê³  í•˜ëŠ”ë°ìš”, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„  labelì„ ë§Œë“¤ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

```text
<div>
  <button
    style={{ backgroundColor: buttonColor }}
    onClick={() => setButtonColor(newButtonColor)}
    disabled={disabled}
  >
    Change to {newButtonColor}
  </button>
  <input
    type="checkbox"
    id="enable-button-checkbox" // ğŸš§ inputì— id
    onChange={(e) => setDisabled(e.target.checked)}
    defaultChecked={disabled}
  />
  <label htmlFor="enable-button-checkbox">Disable button</label> // ğŸš§ labelì— ë™ì¼í•œ idê°’
</div>
```

í…ŒìŠ¤íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë˜‘ë˜‘í•´ì„œ ì²´í¬ë°•ìŠ¤ ì—­í• ì„ í•˜ê³  ì´ ì´ë¦„ì„ ê°–ëŠ” ìš”ì†Œê°€ ë¼ë²¨ì´ ê²°í•©ëœ ìš”ì†Œë¼ëŠ” ê±¸ ì••ë‹ˆë‹¤! :)
