# TypeScriptë¡œ NextResponse ê°ì²´ ê²¬ê³ í•˜ê²Œ ë§Œë“¤ê¸°

íƒœê·¸: NextJS, TypeScript

## ğŸŸÂ NextResponseì— ì „ë‹¬í•  íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ë°©ë²•

í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ì„ ë•Œ, ì„±ê³µì¼€ì´ìŠ¤ì™€ ì‹¤íŒ¨ì¼€ì´ìŠ¤ì˜ ì‘ë‹µ êµ¬ì¡°ê°€ ì–´ëŠì •ë„ëŠ” ì •ê·œí™”ê°€ ë˜ì–´ìˆì–´ì•¼ ì²˜ë¦¬ë¥¼ í•˜ê¸° í¸í–ˆìŠµë‹ˆë‹¤. 

ê·¸ë˜ì„œ api ì„œë²„ ì‘ì—…ì„ í•  ë•Œ, response ê°ì²´ì— ì „ë‹¬í•˜ëŠ” ë°ì´í„°ì— íŠ¹ì • í”„ë¡œí¼í‹°ê°€ ë¹ ì§„ ê²½ìš° íƒ€ì…ì—ëŸ¬ë¥¼ ë‚¼ ìˆ˜ ìˆë„ë¡ ì§€ì •í•´ì£¼ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤. 

```tsx
// ì„±ê³µì¼€ì´ìŠ¤ 
return NextResponse.json({
  success: true,
  data: ticket,
  message: "Successfully retrived image generations",
});

// ì‹¤íŒ¨ì¼€ì´ìŠ¤ 
return NextResponse.json({
  success: false,
  error: {
    code: "INTERNAL_SERVER_ERROR",
    message: "Something went wrong",
  },
});
```

### ğŸš¥Â ê³ ë¯¼í•´ë³¸ ê²ƒë“¤

- dataëŠ” ì–´ë–¤ íƒ€ì…ì„ ê°€ì§€ê³  ìˆì„ ì§€ ëª¨ë¥´ëŠ” ë°°ì—´ì´ë‹¤.
- Response ê°ì²´ì˜ êµ¬ì¡°ëŠ” í•­ìƒ ìœ ì§€í•œë‹¤.

### ğŸš¥Â êµ¬í˜„í•˜ê¸°

ApiResponseì— ëŒ€í•œ íƒ€ì…ì„ `types/api/response/index.ts`ì— ì§€ì •í•©ë‹ˆë‹¤.

```tsx
// dataì— ë“¤ì–´ê°ˆ êµ¬ì¡°ëŠ” ì•Œ ìˆ˜ ì—†ìœ¼ë‹ˆ ì œë„¤ë¦­ìœ¼ë¡œ ì„ ì–¸í•œë‹¤. 
export type ApiSuccessResponse<T> = {
  success: true;
  data: T;
  message: string;
};

export type ApiErrorResponse = {
  success: false;
  error: {
    code: string;
    message: string;
  };
  status: number;
};

export type ApiResponse<T> = ApiSuccessResponse<T> | ApiErrorResponse;

```

ë¦¬í„´íƒ€ì…ì„ `Promise<NextResponse<ApiResponse<>>` ë¡œ ëª…ì‹œí•´ì¤ë‹ˆë‹¤.

â¡ï¸Â í˜„ì¬ëŠ” Ticket ëª¨ë¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— `<Ticket[]>`ì„ Tê°’ì— ì „ë‹¬í–ˆìŠµë‹ˆë‹¤.

```tsx
export async function GET(
  request: NextRequest,
  { params }: userIdRouterParams
): Promise<**NextResponse<ApiResponse<Ticket[]>>**> {
  try {
    const { userId } = await params;

    const ticket = await prisma.ticket.findMany({
      where: { userId },
    });

    return NextResponse.json({
      success: true,
      data: ticket,
      message: "Successfully retrieved tickets",
    });
  } catch (error) {
    return NextResponse.json({
      success: false,
      error: {
        code: "INTERNAL_SERVER_ERROR",
        message: "Something went wrong",
      },
    });
  }
}
```

### ğŸš¥Â ë¦¬í„´ ê°ì²´ì— ì–´ë–¤ ê°’ì„ ë¹ ëœ¨ë ¸ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°™ì´ ì‘ì—…í•˜ëŠ” ê²½ìš°, ë¦¬í„´ íƒ€ì…ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ ì—¬ëŸ¬ ìœ í˜•ì˜ ë¦¬í„´íƒ€ì…ì„ ë°›ê²Œë˜ëŠ”ë° ì´ë ‡ê²Œ íƒ€ì…ì„ ì •ì˜í•˜ë©´ ê·œê²©í™”í•  ìˆ˜ ìˆëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.

![image.png](TypeScript%EB%A1%9C%20NextResponse%20%EA%B0%9D%EC%B2%B4%20%EA%B2%AC%EA%B3%A0%ED%95%98%EA%B2%8C%20%EB%A7%8C%EB%93%A4%EA%B8%B0%201f3b717d4315805ebb8ed9f7f30ae1de/image.png)